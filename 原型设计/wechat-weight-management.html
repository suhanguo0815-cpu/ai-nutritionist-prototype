<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä½“é‡ç®¡ç† - AIè¥å…»å¸ˆæ–‡æ…§</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background: #f7f7f7;
            height: 100vh;
            overflow: hidden;
        }
        
        /* å¾®ä¿¡å¯¼èˆªæ  */
        .wechat-header {
            background: #393a3f;
            color: white;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        /* å¯¹è¯åŒºåŸŸ */
        .chat-container {
            height: calc(100vh - 64px - 80px);
            overflow-y: auto;
            padding: 16px;
            background: #f7f7f7;
        }
        
        /* æ¶ˆæ¯æ°”æ³¡ */
        .message {
            margin-bottom: 16px;
            display: flex;
            align-items: flex-end;
        }
        
        .message.ai {
            justify-content: flex-start;
        }
        
        .message.user {
            justify-content: flex-end;
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            background: #07c160;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin: 0 8px;
            flex-shrink: 0;
        }
        
        .avatar.ai {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .message-bubble {
            max-width: 280px;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 16px;
            line-height: 1.4;
            position: relative;
        }
        
        .message-bubble.ai {
            background: white;
            border-top-left-radius: 6px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        .message-bubble.user {
            background: #07c160;
            color: white;
            border-top-right-radius: 6px;
        }
        
        /* è¾“å…¥åŒºåŸŸ */
        .input-area {
            height: 80px;
            background: white;
            border-top: 1px solid #e5e5e5;
            display: flex;
            align-items: center;
            padding: 0 16px;
            gap: 12px;
        }
        
        .input-actions {
            display: flex;
            gap: 12px;
        }
        
        .action-btn {
            width: 36px;
            height: 36px;
            border-radius: 6px;
            background: #f5f5f5;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .action-btn:hover {
            background: #e5e5e5;
        }
        
        .input-field {
            flex: 1;
            height: 36px;
            border: 1px solid #e5e5e5;
            border-radius: 18px;
            padding: 0 16px;
            font-size: 16px;
            outline: none;
        }
        
        .send-btn {
            width: 36px;
            height: 36px;
            border-radius: 18px;
            background: #07c160;
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .send-btn:hover {
            background: #06ad56;
        }
        
        /* ä½“é‡æ•°æ®å¡ç‰‡ */
        .weight-data-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-top: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 2px solid #10b981;
        }
        
        .weight-title {
            color: #10b981;
            font-weight: bold;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .weight-display {
            text-align: center;
            margin-bottom: 16px;
        }
        
        .current-weight {
            font-size: 36px;
            font-weight: bold;
            color: #10b981;
            margin-bottom: 4px;
        }
        
        .weight-change {
            font-size: 14px;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }
        
        .weight-change.positive {
            color: #ef4444;
        }
        
        .weight-change.negative {
            color: #10b981;
        }
        
        /* è¶‹åŠ¿å›¾è¡¨ */
        .trend-chart {
            background: #f8fafc;
            border-radius: 8px;
            padding: 12px;
            margin: 12px 0;
            border: 1px solid #e2e8f0;
        }
        
        .chart-title {
            font-size: 14px;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }
        
        .chart-container {
            height: 120px;
            background: white;
            border-radius: 6px;
            position: relative;
            overflow: hidden;
        }
        
        /* è¿›åº¦æ¡ */
        .progress-section {
            margin-top: 16px;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .progress-bar {
            background: #e2e8f0;
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #10b981, #059669);
            height: 100%;
            border-radius: 10px;
            transition: width 0.8s ease;
        }
        
        /* åˆ†æå»ºè®®å¡ç‰‡ */
        .analysis-card {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-radius: 12px;
            padding: 16px;
            margin-top: 12px;
            border: 1px solid #3b82f6;
        }
        
        .analysis-title {
            color: #1e40af;
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .analysis-content {
            color: #1e40af;
            font-size: 14px;
            line-height: 1.4;
        }
        
        /* å¿«é€Ÿæ“ä½œæŒ‰é’® */
        .quick-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }
        
        .quick-btn {
            background: #f0f9ff;
            border: 1px solid #3b82f6;
            color: #1e40af;
            border-radius: 16px;
            padding: 6px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .quick-btn:hover {
            background: #3b82f6;
            color: white;
        }
        
        /* è®°å½•è¾“å…¥å¡ç‰‡ */
        .input-card {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            border-radius: 12px;
            padding: 16px;
            margin-top: 8px;
        }
        
        .input-title {
            color: #92400e;
            font-weight: bold;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .weight-input-group {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        
        .weight-input {
            flex: 1;
            padding: 12px;
            border: 2px solid #f59e0b;
            border-radius: 8px;
            font-size: 18px;
            text-align: center;
            font-weight: bold;
            color: #92400e;
        }
        
        .unit-label {
            color: #92400e;
            font-weight: bold;
        }
        
        .submit-btn {
            width: 100%;
            background: #f59e0b;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .submit-btn:hover {
            background: #d97706;
        }
        
        /* é¢„è­¦å¡ç‰‡ */
        .warning-card {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border: 2px solid #ef4444;
            border-radius: 12px;
            padding: 16px;
            margin-top: 8px;
        }
        
        .warning-title {
            color: #dc2626;
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .warning-content {
            color: #dc2626;
            font-size: 14px;
            line-height: 1.4;
        }
        
        /* æ‰“å­—åŠ¨ç”» */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            color: #999;
            font-size: 14px;
        }
        
        .typing-dots {
            display: flex;
            gap: 2px;
        }
        
        .typing-dot {
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: #999;
            animation: typing 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0%, 60%, 100% { opacity: 0.3; }
            30% { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- å¾®ä¿¡å¯¼èˆªæ  -->
    <div class="wechat-header">
        <div class="flex items-center">
            <i class="fas fa-arrow-left text-lg mr-4"></i>
            <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center mr-3">
                    <i class="fas fa-robot text-white text-sm"></i>
                </div>
                <div>
                    <div class="font-semibold">AIè¥å…»å¸ˆæ–‡æ…§</div>
                    <div class="text-xs text-gray-300">ä½“é‡ç®¡ç†åŠ©æ‰‹</div>
                </div>
            </div>
        </div>
        <i class="fas fa-ellipsis-h text-lg"></i>
    </div>
    
    <!-- å¯¹è¯åŒºåŸŸ -->
    <div class="chat-container" id="chatContainer">
        <!-- AIä¸»åŠ¨é—®å€™ -->
        <div class="message ai">
            <div class="avatar ai">
                <i class="fas fa-robot"></i>
            </div>
            <div class="message-bubble ai">
                æ—©ä¸Šå¥½ï¼â˜€ï¸ æ–°çš„ä¸€å¤©å¼€å§‹äº†ï¼Œæˆ‘æ³¨æ„åˆ°ä½ è¿˜æ²¡æœ‰è®°å½•ä»Šå¤©çš„ä½“é‡ã€‚
                
                <div class="quick-actions">
                    <div class="quick-btn" onclick="recordWeight()">âš–ï¸ è®°å½•ä½“é‡</div>
                    <div class="quick-btn" onclick="viewTrend()">ğŸ“ˆ æŸ¥çœ‹è¶‹åŠ¿</div>
                    <div class="quick-btn" onclick="askAnalysis()">ğŸ” åˆ†æå»ºè®®</div>
                </div>
            </div>
        </div>
        
        <!-- ç”¨æˆ·æ¶ˆæ¯ -->
        <div class="message user">
            <div class="message-bubble user">
                æˆ‘æƒ³è®°å½•ä¸€ä¸‹ä»Šå¤©çš„ä½“é‡
            </div>
            <div class="avatar">
                <i class="fas fa-user"></i>
            </div>
        </div>
        
        <!-- AIå›å¤ - ä½“é‡è®°å½• -->
        <div class="message ai">
            <div class="avatar ai">
                <i class="fas fa-robot"></i>
            </div>
            <div class="message-bubble ai">
                å¤ªå¥½äº†ï¼è¯·è¾“å…¥ä½ ä»Šå¤©çš„ä½“é‡æ•°æ®ï¼Œæˆ‘ä¼šä¸ºä½ åˆ†æå˜åŒ–è¶‹åŠ¿ï¼š
                
                <div class="input-card">
                    <div class="input-title">
                        <i class="fas fa-weight"></i>
                        ä»Šæ—¥ä½“é‡è®°å½•
                    </div>
                    <div class="weight-input-group">
                        <input type="number" class="weight-input" id="weightInput" placeholder="62.5" step="0.1" min="30" max="200">
                        <span class="unit-label">kg</span>
                    </div>
                    <button class="submit-btn" onclick="submitWeight()">
                        <i class="fas fa-check mr-2"></i>ç¡®è®¤è®°å½•
                    </button>
                </div>
                
                <div style="background: #fef3c7; border-radius: 8px; padding: 12px; margin-top: 12px; font-size: 14px; color: #92400e;">
                    ğŸ’¡ <strong>è®°å½•å°è´´å£«ï¼š</strong><br>
                    å»ºè®®æ¯å¤©åŒä¸€æ—¶é—´æµ‹é‡ï¼ˆå¦‚æ™¨èµ·ç©ºè…¹æ—¶ï¼‰ï¼Œè¿™æ ·æ•°æ®æ›´å‡†ç¡®å“¦ï¼
                </div>
            </div>
        </div>
        
        <!-- ç”¨æˆ·è®°å½•ä½“é‡åçš„åé¦ˆ -->
        <div class="message user" id="weightRecordMessage" style="display: none;">
            <div class="message-bubble user">
                æˆ‘çš„ä½“é‡æ˜¯62.3kg
            </div>
            <div class="avatar">
                <i class="fas fa-user"></i>
            </div>
        </div>
        
        <!-- AIåˆ†æä½“é‡æ•°æ® -->
        <div class="message ai" id="weightAnalysisMessage" style="display: none;">
            <div class="avatar ai">
                <i class="fas fa-robot"></i>
            </div>
            <div class="message-bubble ai">
                å¤ªæ£’äº†ï¼æˆ‘å·²ç»è®°å½•äº†ä½ çš„ä½“é‡æ•°æ®ï¼Œè®©æˆ‘æ¥åˆ†æä¸€ä¸‹ï¼š
                
                <div class="weight-data-card">
                    <div class="weight-title">
                        <i class="fas fa-chart-line"></i>
                        ä½“é‡å˜åŒ–åˆ†æ
                    </div>
                    
                    <div class="weight-display">
                        <div class="current-weight">62.3kg</div>
                        <div class="weight-change negative">
                            <i class="fas fa-arrow-down"></i>
                            è¾ƒæ˜¨æ—¥ä¸‹é™ 0.2kg
                        </div>
                    </div>
                    
                    <div class="trend-chart">
                        <div class="chart-title">ğŸ“Š è¿‘7å¤©ä½“é‡è¶‹åŠ¿</div>
                        <div class="chart-container">
                            <canvas id="weightTrendChart" width="280" height="120"></canvas>
                        </div>
                    </div>
                    
                    <div class="progress-section">
                        <div class="progress-label">
                            <span>ç›®æ ‡è¿›åº¦</span>
                            <span>å·²å®Œæˆ 45%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 45%"></div>
                        </div>
                        <div style="font-size: 12px; color: #666; margin-top: 4px; text-align: center;">
                            å·²å‡é‡ 2.7kg / ç›®æ ‡ 6kg
                        </div>
                    </div>
                </div>
                
                <div class="analysis-card">
                    <div class="analysis-title">
                        <i class="fas fa-lightbulb"></i>
                        æ™ºèƒ½åˆ†æ
                    </div>
                    <div class="analysis-content">
                        ğŸ‰ <strong>å‡é‡è¿›å±•é¡ºåˆ©ï¼</strong><br>
                        ä½ çš„ä½“é‡ä¸‹é™è¶‹åŠ¿å¾ˆå¥åº·ï¼Œå¹³å‡æ¯å‘¨å‡é‡0.5kgï¼Œå®Œå…¨ç¬¦åˆç§‘å­¦å‡é‡æ ‡å‡†ã€‚ç»§ç»­ä¿æŒå½“å‰çš„é¥®é£Ÿå’Œè¿åŠ¨è®¡åˆ’ï¼
                        <br><br>
                        ğŸ“ˆ <strong>è¶‹åŠ¿é¢„æµ‹ï¼š</strong>æŒ‰ç…§å½“å‰è¿›åº¦ï¼Œé¢„è®¡è¿˜éœ€è¦6å‘¨å³å¯è¾¾åˆ°ç›®æ ‡ä½“é‡58kgã€‚
                    </div>
                </div>
                
                <div class="quick-actions">
                    <div class="quick-btn" onclick="viewDetailedTrend()">ğŸ“Š è¯¦ç»†è¶‹åŠ¿</div>
                    <div class="quick-btn" onclick="adjustTarget()">ğŸ¯ è°ƒæ•´ç›®æ ‡</div>
                    <div class="quick-btn" onclick="shareProgress()">ğŸ“± åˆ†äº«è¿›å±•</div>
                </div>
            </div>
        </div>
        
        <!-- ç”¨æˆ·è¯¢é—®ä½“é‡åœæ» -->
        <div class="message user">
            <div class="message-bubble user">
                æœ€è¿‘å‡ å¤©ä½“é‡å¥½åƒæ²¡ä»€ä¹ˆå˜åŒ–ï¼Œè¿™æ­£å¸¸å—ï¼Ÿ
            </div>
            <div class="avatar">
                <i class="fas fa-user"></i>
            </div>
        </div>
        
        <!-- AIå›å¤ - å¹³å°æœŸåˆ†æ -->
        <div class="message ai">
            <div class="avatar ai">
                <i class="fas fa-robot"></i>
            </div>
            <div class="message-bubble ai">
                è¿™æ˜¯ä¸ªå¾ˆå¥½çš„è§‚å¯Ÿï¼è®©æˆ‘æ¥åˆ†æä¸€ä¸‹ä½ çš„æƒ…å†µï¼š
                
                <div class="analysis-card">
                    <div class="analysis-title">
                        <i class="fas fa-search"></i>
                        å¹³å°æœŸåˆ†æ
                    </div>
                    <div class="analysis-content">
                        æ ¹æ®ä½ çš„æ•°æ®æ˜¾ç¤ºï¼Œä½ æ­£ç»å†ä¸€ä¸ªçŸ­æš‚çš„<strong>ä½“é‡å¹³å°æœŸ</strong>ï¼Œè¿™æ˜¯å‡é‡è¿‡ç¨‹ä¸­çš„æ­£å¸¸ç°è±¡ï¼
                        <br><br>
                        <strong>å¯èƒ½åŸå› ï¼š</strong><br>
                        â€¢ èº«ä½“æ­£åœ¨é€‚åº”æ–°çš„ä»£è°¢æ°´å¹³<br>
                        â€¢ è‚Œè‚‰é‡å¢åŠ ï¼Œè„‚è‚ªå‡å°‘ï¼ˆä½“æˆåˆ†æ”¹å–„ï¼‰<br>
                        â€¢ æ°´åˆ†æ½´ç•™ï¼ˆå¯èƒ½ä¸ç”Ÿç†å‘¨æœŸæœ‰å…³ï¼‰<br>
                        â€¢ æœ€è¿‘è¿åŠ¨å¼ºåº¦å¢åŠ äº†
                    </div>
                </div>
                
                <div style="background: #f0f9ff; border-radius: 8px; padding: 12px; margin-top: 12px; border: 1px solid #3b82f6;">
                    <div style="color: #1e40af; font-weight: bold; margin-bottom: 8px;">ğŸ’¡ çªç ´å»ºè®®</div>
                    <div style="color: #1e40af; font-size: 14px;">
                        1. <strong>è°ƒæ•´è¿åŠ¨æ–¹å¼</strong>ï¼šå¢åŠ 20åˆ†é’ŸåŠ›é‡è®­ç»ƒ<br>
                        2. <strong>é¥®é£Ÿå¾®è°ƒ</strong>ï¼šé€‚é‡å¢åŠ è›‹ç™½è´¨æ‘„å…¥<br>
                        3. <strong>æ”¹å–„ç¡çœ </strong>ï¼šç¡®ä¿æ¯æ™š7-8å°æ—¶ä¼˜è´¨ç¡çœ <br>
                        4. <strong>è€å¿ƒåšæŒ</strong>ï¼šå¹³å°æœŸé€šå¸¸æŒç»­1-2å‘¨å°±ä¼šçªç ´
                    </div>
                </div>
                
                <div class="quick-actions">
                    <div class="quick-btn" onclick="adjustPlan()">ğŸ”„ è°ƒæ•´è®¡åˆ’</div>
                    <div class="quick-btn" onclick="plateauTips()">ğŸ’ª çªç ´æŠ€å·§</div>
                    <div class="quick-btn" onclick="encouragement()">ğŸŒŸ è·å¾—é¼“åŠ±</div>
                </div>
            </div>
        </div>
        
        <!-- ç”¨æˆ·è¯¢é—®ä½“é‡å¼‚å¸¸ -->
        <div class="message user">
            <div class="message-bubble user">
                ä»Šå¤©ä½“é‡çªç„¶å¢åŠ äº†1kgï¼Œæ˜¯ä¸æ˜¯å“ªé‡Œå‡ºé—®é¢˜äº†ï¼Ÿ
            </div>
            <div class="avatar">
                <i class="fas fa-user"></i>
            </div>
        </div>
        
        <!-- AIå›å¤ - å¼‚å¸¸é¢„è­¦ -->
        <div class="message ai">
            <div class="avatar ai">
                <i class="fas fa-robot"></i>
            </div>
            <div class="message-bubble ai">
                æˆ‘ç†è§£ä½ çš„æ‹…å¿ƒï¼è®©æˆ‘æ¥å¸®ä½ åˆ†æä¸€ä¸‹è¿™ä¸ªæƒ…å†µï¼š
                
                <div class="warning-card">
                    <div class="warning-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        ä½“é‡æ³¢åŠ¨æé†’
                    </div>
                    <div class="warning-content">
                        <strong>ä½“é‡çªç„¶å¢åŠ 1kg</strong> é€šå¸¸ä¸æ˜¯çœŸæ­£çš„è„‚è‚ªå¢åŠ ï¼Œæ›´å¯èƒ½æ˜¯ä»¥ä¸‹åŸå› ï¼š
                        <br><br>
                        ğŸ§‚ <strong>æ°´åˆ†æ½´ç•™</strong>ï¼šæ˜¨æ—¥é’ æ‘„å…¥è¿‡å¤šï¼ˆå¤–é£Ÿã€å’¸èœç­‰ï¼‰<br>
                        ğŸ½ï¸ <strong>é£Ÿç‰©é‡é‡</strong>ï¼šèƒƒè‚ å†…å®¹ç‰©è¾ƒå¤š<br>
                        ğŸ’ª <strong>è‚Œè‚‰ç‚ç—‡</strong>ï¼šè¿åŠ¨åè‚Œè‚‰å‚¨æ°´æ¢å¤<br>
                        ğŸŒ™ <strong>ç”Ÿç†å› ç´ </strong>ï¼šå¥³æ€§ç”Ÿç†å‘¨æœŸå½±å“
                    </div>
                </div>
                
                <div style="background: #ecfdf5; border-radius: 8px; padding: 12px; margin-top: 12px; border: 1px solid #10b981;">
                    <div style="color: #065f46; font-weight: bold; margin-bottom: 8px;">ğŸ” å»ºè®®è¡ŒåŠ¨</div>
                    <div style="color: #065f46; font-size: 14px;">
                        1. <strong>å›é¡¾æ˜¨æ—¥é¥®é£Ÿ</strong>ï¼šæ˜¯å¦æœ‰é«˜é’ é£Ÿç‰©ï¼Ÿ<br>
                        2. <strong>å¢åŠ é¥®æ°´</strong>ï¼šå¸®åŠ©èº«ä½“æ’å‡ºå¤šä½™é’ ç¦»å­<br>
                        3. <strong>ç»§ç»­ç›‘æµ‹</strong>ï¼šè§‚å¯Ÿ2-3å¤©çš„å˜åŒ–è¶‹åŠ¿<br>
                        4. <strong>æ­£å¸¸æ‰§è¡Œ</strong>ï¼šæŒ‰åŸè®¡åˆ’è¿›è¡Œé¥®é£Ÿå’Œè¿åŠ¨
                    </div>
                </div>
                
                <div class="quick-actions">
                    <div class="quick-btn" onclick="reviewDiet()">ğŸ½ï¸ å›é¡¾é¥®é£Ÿ</div>
                    <div class="quick-btn" onclick="waterReminder()">ğŸ’§ é¥®æ°´æé†’</div>
                    <div class="quick-btn" onclick="continueMonitor()">ğŸ“Š ç»§ç»­ç›‘æµ‹</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- è¾“å…¥åŒºåŸŸ -->
    <div class="input-area">
        <div class="input-actions">
            <button class="action-btn" onclick="simulateVoiceInput()">
                <i class="fas fa-microphone"></i>
            </button>
            <button class="action-btn" onclick="simulatePhotoInput()">
                <i class="fas fa-camera"></i>
            </button>
            <button class="action-btn">
                <i class="fas fa-plus"></i>
            </button>
        </div>
        <input type="text" class="input-field" placeholder="è¾“å…¥æ¶ˆæ¯æˆ–è¯¢é—®ä½“é‡ç›¸å…³é—®é¢˜..." id="messageInput" onkeypress="handleKeyPress(event)">
        <button class="send-btn" onclick="sendMessage()">
            <i class="fas fa-paper-plane"></i>
        </button>
    </div>
    
    <script>
        let isTyping = false;
        
        // ä½“é‡è®°å½•åŠŸèƒ½
        function submitWeight() {
            const weightInput = document.getElementById('weightInput');
            const weight = parseFloat(weightInput.value);
            
            if (weight && weight >= 30 && weight <= 200) {
                // æ˜¾ç¤ºç”¨æˆ·è®°å½•çš„æ¶ˆæ¯
                document.getElementById('weightRecordMessage').style.display = 'flex';
                document.getElementById('weightRecordMessage').querySelector('.message-bubble').innerHTML = 
                    `æˆ‘çš„ä½“é‡æ˜¯${weight}kg`;
                
                // å»¶è¿Ÿæ˜¾ç¤ºAIåˆ†æ
                setTimeout(() => {
                    document.getElementById('weightAnalysisMessage').style.display = 'flex';
                    drawWeightChart();
                    scrollToBottom();
                }, 1500);
                
                scrollToBottom();
            } else {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„ä½“é‡æ•°æ®ï¼ˆ30-200kgï¼‰');
            }
        }
        
        // ç»˜åˆ¶ä½“é‡è¶‹åŠ¿å›¾
        function drawWeightChart() {
            const canvas = document.getElementById('weightTrendChart');
            const ctx = canvas.getContext('2d');
            
            // æ¸…é™¤ç”»å¸ƒ
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // æ¨¡æ‹Ÿæ•°æ®ç‚¹
            const data = [
                {day: '12/8', weight: 65.2},
                {day: '12/9', weight: 64.8},
                {day: '12/10', weight: 64.5},
                {day: '12/11', weight: 64.1},
                {day: '12/12', weight: 63.8},
                {day: '12/13', weight: 63.5},
                {day: '12/14', weight: 62.3}
            ];
            
            const padding = 20;
            const chartWidth = canvas.width - padding * 2;
            const chartHeight = canvas.height - padding * 2;
            
            // è®¡ç®—åæ ‡
            const xStep = chartWidth / (data.length - 1);
            const minWeight = Math.min(...data.map(d => d.weight)) - 0.5;
            const maxWeight = Math.max(...data.map(d => d.weight)) + 0.5;
            const weightRange = maxWeight - minWeight;
            
            // ç»˜åˆ¶ç½‘æ ¼çº¿
            ctx.strokeStyle = '#e2e8f0';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 4; i++) {
                const y = padding + (chartHeight / 4) * i;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(canvas.width - padding, y);
                ctx.stroke();
            }
            
            // ç»˜åˆ¶æŠ˜çº¿
            ctx.strokeStyle = '#10b981';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            data.forEach((point, index) => {
                const x = padding + index * xStep;
                const y = padding + chartHeight - ((point.weight - minWeight) / weightRange) * chartHeight;
                
                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            
            ctx.stroke();
            
            // ç»˜åˆ¶æ•°æ®ç‚¹
            data.forEach((point, index) => {
                const x = padding + index * xStep;
                const y = padding + chartHeight - ((point.weight - minWeight) / weightRange) * chartHeight;
                
                // æ•°æ®ç‚¹
                ctx.fillStyle = '#10b981';
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
                
                // ç™½è‰²è¾¹æ¡†
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // æ˜¾ç¤ºæ—¥æœŸ
                ctx.fillStyle = '#666';
                ctx.font = '11px -apple-system';
                ctx.textAlign = 'center';
                ctx.fillText(point.day, x, canvas.height - 5);
            });
        }
        
        // å¿«é€Ÿæ“ä½œåŠŸèƒ½
        function recordWeight() {
            addUserMessage('æˆ‘æƒ³è®°å½•ä»Šå¤©çš„ä½“é‡');
            setTimeout(() => {
                simulateAIResponse('è®°å½•ä½“é‡');
            }, 1000);
        }
        
        function viewTrend() {
            addUserMessage('æˆ‘æƒ³æŸ¥çœ‹ä½“é‡å˜åŒ–è¶‹åŠ¿');
            setTimeout(() => {
                simulateAIResponse('æŸ¥çœ‹è¶‹åŠ¿');
            }, 1000);
        }
        
        function askAnalysis() {
            addUserMessage('èƒ½å¸®æˆ‘åˆ†æä¸€ä¸‹ä½“é‡å˜åŒ–å—ï¼Ÿ');
            setTimeout(() => {
                simulateAIResponse('åˆ†æä½“é‡');
            }, 1000);
        }
        
        // å¤„ç†é”®ç›˜äº‹ä»¶
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }
        
        // å‘é€æ¶ˆæ¯
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (message && !isTyping) {
                addUserMessage(message);
                input.value = '';
                
                setTimeout(() => {
                    simulateAIResponse(message);
                }, 1000);
            }
        }
        
        // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
        function addUserMessage(message) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user';
            messageDiv.innerHTML = `
                <div class="message-bubble user">
                    ${message}
                </div>
                <div class="avatar">
                    <i class="fas fa-user"></i>
                </div>
            `;
            chatContainer.appendChild(messageDiv);
            scrollToBottom();
        }
        
        // æ·»åŠ AIæ¶ˆæ¯
        function addAIMessage(message) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            messageDiv.innerHTML = `
                <div class="avatar ai">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="message-bubble ai">
                    ${message}
                </div>
            `;
            chatContainer.appendChild(messageDiv);
            scrollToBottom();
        }
        
        // æ¨¡æ‹ŸAIå›å¤
        function simulateAIResponse(userMessage) {
            isTyping = true;
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                let response = getAIResponse(userMessage);
                addAIMessage(response);
                isTyping = false;
            }, 2000);
        }
        
        // è·å–AIå›å¤å†…å®¹
        function getAIResponse(message) {
            const responses = {
                'è¶‹åŠ¿': `
                    æ ¹æ®ä½ çš„ä½“é‡è®°å½•ï¼Œæˆ‘æ¥ä¸ºä½ å±•ç¤ºè¯¦ç»†çš„å˜åŒ–è¶‹åŠ¿ï¼š
                    
                    <div class="weight-data-card">
                        <div class="weight-title">
                            <i class="fas fa-chart-bar"></i>
                            è¯¦ç»†è¶‹åŠ¿åˆ†æ
                        </div>
                        
                        <div style="margin-bottom: 16px;">
                            <div style="font-weight: bold; margin-bottom: 8px;">ğŸ“Š æœˆåº¦ç»Ÿè®¡</div>
                            <div style="font-size: 14px; color: #666;">
                                â€¢ æœ¬æœˆå·²å‡é‡ï¼š<strong style="color: #10b981;">2.1kg</strong><br>
                                â€¢ å¹³å‡æ¯å‘¨å‡é‡ï¼š<strong>0.7kg</strong><br>
                                â€¢ æœ€ä½³å‡é‡æ—¥ï¼š<strong>å‘¨ä¸‰ (-0.4kg)</strong><br>
                                â€¢ ä½“é‡å˜åŒ–å¹…åº¦ï¼š<strong>Â±0.3kg (æ­£å¸¸èŒƒå›´)</strong>
                            </div>
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <div class="quick-btn">ğŸ“ˆ æœˆåº¦æŠ¥å‘Š</div>
                        <div class="quick-btn">ğŸ¯ è°ƒæ•´ç›®æ ‡</div>
                        <div class="quick-btn">ğŸ“± å¯¼å‡ºæ•°æ®</div>
                    </div>
                `,
                'åˆ†æ': `
                    æˆ‘æ¥ä¸ºä½ è¿›è¡Œå…¨é¢çš„ä½“é‡åˆ†æï¼š
                    
                    <div class="analysis-card">
                        <div class="analysis-title">
                            <i class="fas fa-brain"></i>
                            æ™ºèƒ½å¥åº·åˆ†æ
                        </div>
                        <div class="analysis-content">
                            <strong>æ•´ä½“è¯„ä»·ï¼š</strong>ä½ çš„å‡é‡è¿›å±•éå¸¸ç†æƒ³ï¼ â­â­â­â­â­<br><br>
                            
                            <strong>ä¼˜åŠ¿è¡¨ç°ï¼š</strong><br>
                            â€¢ ä½“é‡ä¸‹é™ç¨³å®šï¼Œæ— åå¼¹ç°è±¡<br>
                            â€¢ å‡é‡é€Ÿåº¦å¥åº·ï¼ˆæ¯å‘¨0.5-0.8kgï¼‰<br>
                            â€¢ æ•°æ®è®°å½•åšæŒæ€§å¾ˆå¥½<br><br>
                            
                            <strong>æ”¹è¿›å»ºè®®ï¼š</strong><br>
                            â€¢ å¯é€‚å½“å¢åŠ åŠ›é‡è®­ç»ƒï¼Œæé«˜åŸºç¡€ä»£è°¢<br>
                            â€¢ æ³¨æ„è¡¥å……è›‹ç™½è´¨ï¼Œé˜²æ­¢è‚Œè‚‰æµå¤±
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <div class="quick-btn">ğŸ’ª è¿åŠ¨å»ºè®®</div>
                        <div class="quick-btn">ğŸ¥— é¥®é£Ÿä¼˜åŒ–</div>
                        <div class="quick-btn">ğŸ“… åˆ¶å®šè®¡åˆ’</div>
                    </div>
                `,
                default: `
                    æˆ‘ä¼šæŒç»­å…³æ³¨ä½ çš„ä½“é‡å˜åŒ–ï¼Œä¸ºä½ æä¾›ä¸“ä¸šçš„åˆ†æå’Œå»ºè®®ï¼
                    
                    <div style="background: #f0f9ff; border-radius: 8px; padding: 12px; margin-top: 8px;">
                        <div style="color: #1e40af; font-weight: bold; margin-bottom: 8px;">ğŸ’¡ æ¸©é¦¨æé†’</div>
                        <div style="color: #1e40af; font-size: 14px;">
                            ä½“é‡ç®¡ç†æ˜¯ä¸€ä¸ªå¾ªåºæ¸è¿›çš„è¿‡ç¨‹ï¼Œä¿æŒè€å¿ƒå’Œæ’å¿ƒæœ€é‡è¦ã€‚æˆ‘ä¼šä¸€ç›´é™ªä¼´ä½ ï¼Œä¸ºä½ åŠ æ²¹ï¼
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <div class="quick-btn">âš–ï¸ è®°å½•ä½“é‡</div>
                        <div class="quick-btn">ğŸ“Š æŸ¥çœ‹æ•°æ®</div>
                        <div class="quick-btn">ğŸ’ª è·å¾—é¼“åŠ±</div>
                    </div>
                `
            };
            
            if (message.includes('è¶‹åŠ¿') || message.includes('å˜åŒ–')) {
                return responses['è¶‹åŠ¿'];
            } else if (message.includes('åˆ†æ') || message.includes('è¯„ä¼°')) {
                return responses['åˆ†æ'];
            } else {
                return responses['default'];
            }
        }
        
        // æ˜¾ç¤ºæ‰“å­—æŒ‡ç¤ºå™¨
        function showTypingIndicator() {
            const chatContainer = document.getElementById('chatContainer');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai';
            typingDiv.id = 'typingMessage';
            typingDiv.innerHTML = `
                <div class="avatar ai">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="message-bubble ai">
                    <div class="typing-indicator">
                        æ–‡æ…§æ­£åœ¨åˆ†æä¸­
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>
            `;
            chatContainer.appendChild(typingDiv);
            scrollToBottom();
        }
        
        // éšè—æ‰“å­—æŒ‡ç¤ºå™¨
        function hideTypingIndicator() {
            const typingMessage = document.getElementById('typingMessage');
            if (typingMessage) {
                typingMessage.remove();
            }
        }
        
        // æ»šåŠ¨åˆ°åº•éƒ¨
        function scrollToBottom() {
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(scrollToBottom, 100);
        });
    </script>
</body>
</html>
