<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>体重管理 - AI营养师文慧</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background: #f7f7f7;
            height: 100vh;
            overflow: hidden;
        }
        
        /* 微信导航栏 */
        .wechat-header {
            background: #393a3f;
            color: white;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        /* 对话区域 */
        .chat-container {
            height: calc(100vh - 64px - 80px);
            overflow-y: auto;
            padding: 16px;
            background: #f7f7f7;
        }
        
        /* 消息气泡 */
        .message {
            margin-bottom: 16px;
            display: flex;
            align-items: flex-end;
        }
        
        .message.ai {
            justify-content: flex-start;
        }
        
        .message.user {
            justify-content: flex-end;
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            background: #07c160;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin: 0 8px;
            flex-shrink: 0;
        }
        
        .avatar.ai {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .message-bubble {
            max-width: 280px;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 16px;
            line-height: 1.4;
            position: relative;
        }
        
        .message-bubble.ai {
            background: white;
            border-top-left-radius: 6px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        .message-bubble.user {
            background: #07c160;
            color: white;
            border-top-right-radius: 6px;
        }
        
        /* 输入区域 */
        .input-area {
            height: 80px;
            background: white;
            border-top: 1px solid #e5e5e5;
            display: flex;
            align-items: center;
            padding: 0 16px;
            gap: 12px;
        }
        
        .input-actions {
            display: flex;
            gap: 12px;
        }
        
        .action-btn {
            width: 36px;
            height: 36px;
            border-radius: 6px;
            background: #f5f5f5;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .action-btn:hover {
            background: #e5e5e5;
        }
        
        .input-field {
            flex: 1;
            height: 36px;
            border: 1px solid #e5e5e5;
            border-radius: 18px;
            padding: 0 16px;
            font-size: 16px;
            outline: none;
        }
        
        .send-btn {
            width: 36px;
            height: 36px;
            border-radius: 18px;
            background: #07c160;
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .send-btn:hover {
            background: #06ad56;
        }
        
        /* 体重数据卡片 */
        .weight-data-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-top: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 2px solid #10b981;
        }
        
        .weight-title {
            color: #10b981;
            font-weight: bold;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .weight-display {
            text-align: center;
            margin-bottom: 16px;
        }
        
        .current-weight {
            font-size: 36px;
            font-weight: bold;
            color: #10b981;
            margin-bottom: 4px;
        }
        
        .weight-change {
            font-size: 14px;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }
        
        .weight-change.positive {
            color: #ef4444;
        }
        
        .weight-change.negative {
            color: #10b981;
        }
        
        /* 趋势图表 */
        .trend-chart {
            background: #f8fafc;
            border-radius: 8px;
            padding: 12px;
            margin: 12px 0;
            border: 1px solid #e2e8f0;
        }
        
        .chart-title {
            font-size: 14px;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }
        
        .chart-container {
            height: 120px;
            background: white;
            border-radius: 6px;
            position: relative;
            overflow: hidden;
        }
        
        /* 进度条 */
        .progress-section {
            margin-top: 16px;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .progress-bar {
            background: #e2e8f0;
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #10b981, #059669);
            height: 100%;
            border-radius: 10px;
            transition: width 0.8s ease;
        }
        
        /* 分析建议卡片 */
        .analysis-card {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-radius: 12px;
            padding: 16px;
            margin-top: 12px;
            border: 1px solid #3b82f6;
        }
        
        .analysis-title {
            color: #1e40af;
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .analysis-content {
            color: #1e40af;
            font-size: 14px;
            line-height: 1.4;
        }
        
        /* 快速操作按钮 */
        .quick-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }
        
        .quick-btn {
            background: #f0f9ff;
            border: 1px solid #3b82f6;
            color: #1e40af;
            border-radius: 16px;
            padding: 6px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .quick-btn:hover {
            background: #3b82f6;
            color: white;
        }
        
        /* 记录输入卡片 */
        .input-card {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            border-radius: 12px;
            padding: 16px;
            margin-top: 8px;
        }
        
        .input-title {
            color: #92400e;
            font-weight: bold;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .weight-input-group {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        
        .weight-input {
            flex: 1;
            padding: 12px;
            border: 2px solid #f59e0b;
            border-radius: 8px;
            font-size: 18px;
            text-align: center;
            font-weight: bold;
            color: #92400e;
        }
        
        .unit-label {
            color: #92400e;
            font-weight: bold;
        }
        
        .submit-btn {
            width: 100%;
            background: #f59e0b;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .submit-btn:hover {
            background: #d97706;
        }
        
        /* 预警卡片 */
        .warning-card {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border: 2px solid #ef4444;
            border-radius: 12px;
            padding: 16px;
            margin-top: 8px;
        }
        
        .warning-title {
            color: #dc2626;
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .warning-content {
            color: #dc2626;
            font-size: 14px;
            line-height: 1.4;
        }
        
        /* 打字动画 */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            color: #999;
            font-size: 14px;
        }
        
        .typing-dots {
            display: flex;
            gap: 2px;
        }
        
        .typing-dot {
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: #999;
            animation: typing 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0%, 60%, 100% { opacity: 0.3; }
            30% { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- 微信导航栏 -->
    <div class="wechat-header">
        <div class="flex items-center">
            <i class="fas fa-arrow-left text-lg mr-4"></i>
            <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center mr-3">
                    <i class="fas fa-robot text-white text-sm"></i>
                </div>
                <div>
                    <div class="font-semibold">AI营养师文慧</div>
                    <div class="text-xs text-gray-300">体重管理助手</div>
                </div>
            </div>
        </div>
        <i class="fas fa-ellipsis-h text-lg"></i>
    </div>
    
    <!-- 对话区域 -->
    <div class="chat-container" id="chatContainer">
        <!-- AI主动问候 -->
        <div class="message ai">
            <div class="avatar ai">
                <i class="fas fa-robot"></i>
            </div>
            <div class="message-bubble ai">
                早上好！☀️ 新的一天开始了，我注意到你还没有记录今天的体重。
                
                <div class="quick-actions">
                    <div class="quick-btn" onclick="recordWeight()">⚖️ 记录体重</div>
                    <div class="quick-btn" onclick="viewTrend()">📈 查看趋势</div>
                    <div class="quick-btn" onclick="askAnalysis()">🔍 分析建议</div>
                </div>
            </div>
        </div>
        
        <!-- 用户消息 -->
        <div class="message user">
            <div class="message-bubble user">
                我想记录一下今天的体重
            </div>
            <div class="avatar">
                <i class="fas fa-user"></i>
            </div>
        </div>
        
        <!-- AI回复 - 体重记录 -->
        <div class="message ai">
            <div class="avatar ai">
                <i class="fas fa-robot"></i>
            </div>
            <div class="message-bubble ai">
                太好了！请输入你今天的体重数据，我会为你分析变化趋势：
                
                <div class="input-card">
                    <div class="input-title">
                        <i class="fas fa-weight"></i>
                        今日体重记录
                    </div>
                    <div class="weight-input-group">
                        <input type="number" class="weight-input" id="weightInput" placeholder="62.5" step="0.1" min="30" max="200">
                        <span class="unit-label">kg</span>
                    </div>
                    <button class="submit-btn" onclick="submitWeight()">
                        <i class="fas fa-check mr-2"></i>确认记录
                    </button>
                </div>
                
                <div style="background: #fef3c7; border-radius: 8px; padding: 12px; margin-top: 12px; font-size: 14px; color: #92400e;">
                    💡 <strong>记录小贴士：</strong><br>
                    建议每天同一时间测量（如晨起空腹时），这样数据更准确哦！
                </div>
            </div>
        </div>
        
        <!-- 用户记录体重后的反馈 -->
        <div class="message user" id="weightRecordMessage" style="display: none;">
            <div class="message-bubble user">
                我的体重是62.3kg
            </div>
            <div class="avatar">
                <i class="fas fa-user"></i>
            </div>
        </div>
        
        <!-- AI分析体重数据 -->
        <div class="message ai" id="weightAnalysisMessage" style="display: none;">
            <div class="avatar ai">
                <i class="fas fa-robot"></i>
            </div>
            <div class="message-bubble ai">
                太棒了！我已经记录了你的体重数据，让我来分析一下：
                
                <div class="weight-data-card">
                    <div class="weight-title">
                        <i class="fas fa-chart-line"></i>
                        体重变化分析
                    </div>
                    
                    <div class="weight-display">
                        <div class="current-weight">62.3kg</div>
                        <div class="weight-change negative">
                            <i class="fas fa-arrow-down"></i>
                            较昨日下降 0.2kg
                        </div>
                    </div>
                    
                    <div class="trend-chart">
                        <div class="chart-title">📊 近7天体重趋势</div>
                        <div class="chart-container">
                            <canvas id="weightTrendChart" width="280" height="120"></canvas>
                        </div>
                    </div>
                    
                    <div class="progress-section">
                        <div class="progress-label">
                            <span>目标进度</span>
                            <span>已完成 45%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 45%"></div>
                        </div>
                        <div style="font-size: 12px; color: #666; margin-top: 4px; text-align: center;">
                            已减重 2.7kg / 目标 6kg
                        </div>
                    </div>
                </div>
                
                <div class="analysis-card">
                    <div class="analysis-title">
                        <i class="fas fa-lightbulb"></i>
                        智能分析
                    </div>
                    <div class="analysis-content">
                        🎉 <strong>减重进展顺利！</strong><br>
                        你的体重下降趋势很健康，平均每周减重0.5kg，完全符合科学减重标准。继续保持当前的饮食和运动计划！
                        <br><br>
                        📈 <strong>趋势预测：</strong>按照当前进度，预计还需要6周即可达到目标体重58kg。
                    </div>
                </div>
                
                <div class="quick-actions">
                    <div class="quick-btn" onclick="viewDetailedTrend()">📊 详细趋势</div>
                    <div class="quick-btn" onclick="adjustTarget()">🎯 调整目标</div>
                    <div class="quick-btn" onclick="shareProgress()">📱 分享进展</div>
                </div>
            </div>
        </div>
        
        <!-- 用户询问体重停滞 -->
        <div class="message user">
            <div class="message-bubble user">
                最近几天体重好像没什么变化，这正常吗？
            </div>
            <div class="avatar">
                <i class="fas fa-user"></i>
            </div>
        </div>
        
        <!-- AI回复 - 平台期分析 -->
        <div class="message ai">
            <div class="avatar ai">
                <i class="fas fa-robot"></i>
            </div>
            <div class="message-bubble ai">
                这是个很好的观察！让我来分析一下你的情况：
                
                <div class="analysis-card">
                    <div class="analysis-title">
                        <i class="fas fa-search"></i>
                        平台期分析
                    </div>
                    <div class="analysis-content">
                        根据你的数据显示，你正经历一个短暂的<strong>体重平台期</strong>，这是减重过程中的正常现象！
                        <br><br>
                        <strong>可能原因：</strong><br>
                        • 身体正在适应新的代谢水平<br>
                        • 肌肉量增加，脂肪减少（体成分改善）<br>
                        • 水分潴留（可能与生理周期有关）<br>
                        • 最近运动强度增加了
                    </div>
                </div>
                
                <div style="background: #f0f9ff; border-radius: 8px; padding: 12px; margin-top: 12px; border: 1px solid #3b82f6;">
                    <div style="color: #1e40af; font-weight: bold; margin-bottom: 8px;">💡 突破建议</div>
                    <div style="color: #1e40af; font-size: 14px;">
                        1. <strong>调整运动方式</strong>：增加20分钟力量训练<br>
                        2. <strong>饮食微调</strong>：适量增加蛋白质摄入<br>
                        3. <strong>改善睡眠</strong>：确保每晚7-8小时优质睡眠<br>
                        4. <strong>耐心坚持</strong>：平台期通常持续1-2周就会突破
                    </div>
                </div>
                
                <div class="quick-actions">
                    <div class="quick-btn" onclick="adjustPlan()">🔄 调整计划</div>
                    <div class="quick-btn" onclick="plateauTips()">💪 突破技巧</div>
                    <div class="quick-btn" onclick="encouragement()">🌟 获得鼓励</div>
                </div>
            </div>
        </div>
        
        <!-- 用户询问体重异常 -->
        <div class="message user">
            <div class="message-bubble user">
                今天体重突然增加了1kg，是不是哪里出问题了？
            </div>
            <div class="avatar">
                <i class="fas fa-user"></i>
            </div>
        </div>
        
        <!-- AI回复 - 异常预警 -->
        <div class="message ai">
            <div class="avatar ai">
                <i class="fas fa-robot"></i>
            </div>
            <div class="message-bubble ai">
                我理解你的担心！让我来帮你分析一下这个情况：
                
                <div class="warning-card">
                    <div class="warning-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        体重波动提醒
                    </div>
                    <div class="warning-content">
                        <strong>体重突然增加1kg</strong> 通常不是真正的脂肪增加，更可能是以下原因：
                        <br><br>
                        🧂 <strong>水分潴留</strong>：昨日钠摄入过多（外食、咸菜等）<br>
                        🍽️ <strong>食物重量</strong>：胃肠内容物较多<br>
                        💪 <strong>肌肉炎症</strong>：运动后肌肉储水恢复<br>
                        🌙 <strong>生理因素</strong>：女性生理周期影响
                    </div>
                </div>
                
                <div style="background: #ecfdf5; border-radius: 8px; padding: 12px; margin-top: 12px; border: 1px solid #10b981;">
                    <div style="color: #065f46; font-weight: bold; margin-bottom: 8px;">🔍 建议行动</div>
                    <div style="color: #065f46; font-size: 14px;">
                        1. <strong>回顾昨日饮食</strong>：是否有高钠食物？<br>
                        2. <strong>增加饮水</strong>：帮助身体排出多余钠离子<br>
                        3. <strong>继续监测</strong>：观察2-3天的变化趋势<br>
                        4. <strong>正常执行</strong>：按原计划进行饮食和运动
                    </div>
                </div>
                
                <div class="quick-actions">
                    <div class="quick-btn" onclick="reviewDiet()">🍽️ 回顾饮食</div>
                    <div class="quick-btn" onclick="waterReminder()">💧 饮水提醒</div>
                    <div class="quick-btn" onclick="continueMonitor()">📊 继续监测</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 输入区域 -->
    <div class="input-area">
        <div class="input-actions">
            <button class="action-btn" onclick="simulateVoiceInput()">
                <i class="fas fa-microphone"></i>
            </button>
            <button class="action-btn" onclick="simulatePhotoInput()">
                <i class="fas fa-camera"></i>
            </button>
            <button class="action-btn">
                <i class="fas fa-plus"></i>
            </button>
        </div>
        <input type="text" class="input-field" placeholder="输入消息或询问体重相关问题..." id="messageInput" onkeypress="handleKeyPress(event)">
        <button class="send-btn" onclick="sendMessage()">
            <i class="fas fa-paper-plane"></i>
        </button>
    </div>
    
    <script>
        let isTyping = false;
        
        // 体重记录功能
        function submitWeight() {
            const weightInput = document.getElementById('weightInput');
            const weight = parseFloat(weightInput.value);
            
            if (weight && weight >= 30 && weight <= 200) {
                // 显示用户记录的消息
                document.getElementById('weightRecordMessage').style.display = 'flex';
                document.getElementById('weightRecordMessage').querySelector('.message-bubble').innerHTML = 
                    `我的体重是${weight}kg`;
                
                // 延迟显示AI分析
                setTimeout(() => {
                    document.getElementById('weightAnalysisMessage').style.display = 'flex';
                    drawWeightChart();
                    scrollToBottom();
                }, 1500);
                
                scrollToBottom();
            } else {
                alert('请输入有效的体重数据（30-200kg）');
            }
        }
        
        // 绘制体重趋势图
        function drawWeightChart() {
            const canvas = document.getElementById('weightTrendChart');
            const ctx = canvas.getContext('2d');
            
            // 清除画布
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // 模拟数据点
            const data = [
                {day: '12/8', weight: 65.2},
                {day: '12/9', weight: 64.8},
                {day: '12/10', weight: 64.5},
                {day: '12/11', weight: 64.1},
                {day: '12/12', weight: 63.8},
                {day: '12/13', weight: 63.5},
                {day: '12/14', weight: 62.3}
            ];
            
            const padding = 20;
            const chartWidth = canvas.width - padding * 2;
            const chartHeight = canvas.height - padding * 2;
            
            // 计算坐标
            const xStep = chartWidth / (data.length - 1);
            const minWeight = Math.min(...data.map(d => d.weight)) - 0.5;
            const maxWeight = Math.max(...data.map(d => d.weight)) + 0.5;
            const weightRange = maxWeight - minWeight;
            
            // 绘制网格线
            ctx.strokeStyle = '#e2e8f0';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 4; i++) {
                const y = padding + (chartHeight / 4) * i;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(canvas.width - padding, y);
                ctx.stroke();
            }
            
            // 绘制折线
            ctx.strokeStyle = '#10b981';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            data.forEach((point, index) => {
                const x = padding + index * xStep;
                const y = padding + chartHeight - ((point.weight - minWeight) / weightRange) * chartHeight;
                
                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            
            ctx.stroke();
            
            // 绘制数据点
            data.forEach((point, index) => {
                const x = padding + index * xStep;
                const y = padding + chartHeight - ((point.weight - minWeight) / weightRange) * chartHeight;
                
                // 数据点
                ctx.fillStyle = '#10b981';
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
                
                // 白色边框
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // 显示日期
                ctx.fillStyle = '#666';
                ctx.font = '11px -apple-system';
                ctx.textAlign = 'center';
                ctx.fillText(point.day, x, canvas.height - 5);
            });
        }
        
        // 快速操作功能
        function recordWeight() {
            addUserMessage('我想记录今天的体重');
            setTimeout(() => {
                simulateAIResponse('记录体重');
            }, 1000);
        }
        
        function viewTrend() {
            addUserMessage('我想查看体重变化趋势');
            setTimeout(() => {
                simulateAIResponse('查看趋势');
            }, 1000);
        }
        
        function askAnalysis() {
            addUserMessage('能帮我分析一下体重变化吗？');
            setTimeout(() => {
                simulateAIResponse('分析体重');
            }, 1000);
        }
        
        // 处理键盘事件
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }
        
        // 发送消息
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (message && !isTyping) {
                addUserMessage(message);
                input.value = '';
                
                setTimeout(() => {
                    simulateAIResponse(message);
                }, 1000);
            }
        }
        
        // 添加用户消息
        function addUserMessage(message) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user';
            messageDiv.innerHTML = `
                <div class="message-bubble user">
                    ${message}
                </div>
                <div class="avatar">
                    <i class="fas fa-user"></i>
                </div>
            `;
            chatContainer.appendChild(messageDiv);
            scrollToBottom();
        }
        
        // 添加AI消息
        function addAIMessage(message) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            messageDiv.innerHTML = `
                <div class="avatar ai">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="message-bubble ai">
                    ${message}
                </div>
            `;
            chatContainer.appendChild(messageDiv);
            scrollToBottom();
        }
        
        // 模拟AI回复
        function simulateAIResponse(userMessage) {
            isTyping = true;
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                let response = getAIResponse(userMessage);
                addAIMessage(response);
                isTyping = false;
            }, 2000);
        }
        
        // 获取AI回复内容
        function getAIResponse(message) {
            const responses = {
                '趋势': `
                    根据你的体重记录，我来为你展示详细的变化趋势：
                    
                    <div class="weight-data-card">
                        <div class="weight-title">
                            <i class="fas fa-chart-bar"></i>
                            详细趋势分析
                        </div>
                        
                        <div style="margin-bottom: 16px;">
                            <div style="font-weight: bold; margin-bottom: 8px;">📊 月度统计</div>
                            <div style="font-size: 14px; color: #666;">
                                • 本月已减重：<strong style="color: #10b981;">2.1kg</strong><br>
                                • 平均每周减重：<strong>0.7kg</strong><br>
                                • 最佳减重日：<strong>周三 (-0.4kg)</strong><br>
                                • 体重变化幅度：<strong>±0.3kg (正常范围)</strong>
                            </div>
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <div class="quick-btn">📈 月度报告</div>
                        <div class="quick-btn">🎯 调整目标</div>
                        <div class="quick-btn">📱 导出数据</div>
                    </div>
                `,
                '分析': `
                    我来为你进行全面的体重分析：
                    
                    <div class="analysis-card">
                        <div class="analysis-title">
                            <i class="fas fa-brain"></i>
                            智能健康分析
                        </div>
                        <div class="analysis-content">
                            <strong>整体评价：</strong>你的减重进展非常理想！ ⭐⭐⭐⭐⭐<br><br>
                            
                            <strong>优势表现：</strong><br>
                            • 体重下降稳定，无反弹现象<br>
                            • 减重速度健康（每周0.5-0.8kg）<br>
                            • 数据记录坚持性很好<br><br>
                            
                            <strong>改进建议：</strong><br>
                            • 可适当增加力量训练，提高基础代谢<br>
                            • 注意补充蛋白质，防止肌肉流失
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <div class="quick-btn">💪 运动建议</div>
                        <div class="quick-btn">🥗 饮食优化</div>
                        <div class="quick-btn">📅 制定计划</div>
                    </div>
                `,
                default: `
                    我会持续关注你的体重变化，为你提供专业的分析和建议！
                    
                    <div style="background: #f0f9ff; border-radius: 8px; padding: 12px; margin-top: 8px;">
                        <div style="color: #1e40af; font-weight: bold; margin-bottom: 8px;">💡 温馨提醒</div>
                        <div style="color: #1e40af; font-size: 14px;">
                            体重管理是一个循序渐进的过程，保持耐心和恒心最重要。我会一直陪伴你，为你加油！
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <div class="quick-btn">⚖️ 记录体重</div>
                        <div class="quick-btn">📊 查看数据</div>
                        <div class="quick-btn">💪 获得鼓励</div>
                    </div>
                `
            };
            
            if (message.includes('趋势') || message.includes('变化')) {
                return responses['趋势'];
            } else if (message.includes('分析') || message.includes('评估')) {
                return responses['分析'];
            } else {
                return responses['default'];
            }
        }
        
        // 显示打字指示器
        function showTypingIndicator() {
            const chatContainer = document.getElementById('chatContainer');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai';
            typingDiv.id = 'typingMessage';
            typingDiv.innerHTML = `
                <div class="avatar ai">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="message-bubble ai">
                    <div class="typing-indicator">
                        文慧正在分析中
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>
            `;
            chatContainer.appendChild(typingDiv);
            scrollToBottom();
        }
        
        // 隐藏打字指示器
        function hideTypingIndicator() {
            const typingMessage = document.getElementById('typingMessage');
            if (typingMessage) {
                typingMessage.remove();
            }
        }
        
        // 滚动到底部
        function scrollToBottom() {
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }
        
        // 页面加载完成后自动滚动到底部
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(scrollToBottom, 100);
        });
    </script>
</body>
</html>
